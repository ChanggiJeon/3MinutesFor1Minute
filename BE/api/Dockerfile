FROM continuumio/miniconda3
ENV PYTHONUNBUFFERED 1
ARG DEBUG
ARG SECRET_KEY
ARG ALLOWED_HOSTS
ARG DATABASE_NAME
ARG DATABASE_USER
ARG DATABASE_PASS
ARG DATABASE_HOST
ENV DATABASE_PORT $DATABASE_PORT
ENV ALLOWED_HOSTS $ALLOWED_HOSTS
ENV DATABASE_NAME $DATABASE_NAME
ENV DATABASE_USER $DATABASE_USER
ENV DATABASE_PASS $DATABASE_PASS
ENV DATABASE_HOST $DATABASE_HOST
ENV DATABASE_PORT $DATABASE_PORT
RUN mkdir /backend
WORKDIR /backend
ADD 
COPY ./ ./
RUN conda env create -f environment.yaml
RUN conda activate ai
RUN pip install --upgrade pip
RUN pip install gunicorn
ENV PATH /opt/conda/envs/ai/bin:$PATH